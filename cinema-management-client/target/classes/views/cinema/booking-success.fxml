<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<BorderPane xmlns="http://javafx.com/javafx"
    xmlns:fx="http://javafx.com/fxml" 
    fx:controller="com.cinema.controllers.cinema.BookingSuccessController" 
    styleClass="success-root" 
    stylesheets="@../../styles/booking-success.css">

    <!-- HEADER -->
    <top>
        <HBox styleClass="success-header" alignment="CENTER">
            <padding>
                <Insets top="25" right="40" bottom="25" left="40"/>
            </padding>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="CINEMA PRO" styleClass="app-name-label"/>
            <Region HBox.hgrow="ALWAYS"/>
        </HBox>
    </top>

    <!-- MAIN CONTENT -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="success-scroll">
            <StackPane alignment="CENTER">
                <VBox styleClass="success-container" spacing="0" alignment="CENTER">
                    <padding>
                        <Insets top="30" right="40" bottom="30" left="40"/>
                    </padding>

                    <!-- SUCCESS BANNER -->
                    <VBox alignment="CENTER" spacing="15" styleClass="success-banner">
                        <StackPane styleClass="checkmark-container">
                            <Circle radius="45" styleClass="checkmark-circle"/>
                            <Label text="âœ“" styleClass="checkmark-icon"/>
                        </StackPane>

                        <Label text="Äáº¶T VÃ‰ THÃ€NH CÃ”NG!" styleClass="success-title"/>
                        <Label text="Cáº£m Æ¡n quÃ½ khÃ¡ch Ä‘Ã£ tin tÆ°á»Ÿng Cinema Pro" styleClass="success-subtitle"/>
                    </VBox>

                    <!-- BOOKING CODE -->
                    <HBox alignment="CENTER" spacing="10" maxWidth="824" styleClass="booking-code-container">
                        <VBox.margin>
                            <Insets top="18" bottom="30"/>
                        </VBox.margin>
                        <Label text="MÃƒ Äáº¶T VÃ‰:" styleClass="code-label"/>
                        <Label fx:id="bookingCodeLabel" text="BOOK20251209001" styleClass="code-value"/>
                    </HBox>

                    <!-- MAIN TICKET CONTAINER -->
                    <HBox styleClass="ticket-main-box" spacing="24" alignment="CENTER">

                        <!-- LEFT SIDE: QR + QUICK INFO -->
                        <VBox spacing="18" styleClass="left-section" alignment="TOP_CENTER">

                            <!-- QR CODE CARD -->
                            <VBox alignment="CENTER" spacing="12" styleClass="qr-card">
                                <Label text="VÃ‰ ÄIá»†N Tá»¬" styleClass="qr-title"/>

                                <StackPane styleClass="qr-wrapper">
                                    <ImageView fx:id="ticketQrImage" fitWidth="240" fitHeight="240" 
                                               preserveRatio="true" styleClass="qr-image"/>
                                </StackPane>

                                <Label text="Xuáº¥t trÃ¬nh mÃ£ nÃ y táº¡i quáº§y vÃ©" styleClass="qr-note" wrapText="true"/>
                            </VBox>

                            <!-- CUSTOMER INFO CARD -->
                            <VBox spacing="18" styleClass="customer-card">
                                <Label text="THÃ”NG TIN KHÃCH HÃ€NG" styleClass="card-title"/>

                                <VBox spacing="10" styleClass="customer-details">
                                    <HBox spacing="12" alignment="CENTER_LEFT">
                                        <Label text="ðŸ‘¤" styleClass="icon-emoji"/>
                                        <VBox spacing="2">
                                            <Label text="Há» tÃªn" styleClass="info-label"/>
                                            <Label fx:id="customerNameLabel" text="Nguyá»…n VÄƒn An" styleClass="info-value"/>
                                        </VBox>
                                    </HBox>

                                    <HBox spacing="12" alignment="CENTER_LEFT">
                                        <Label text="ðŸ“ž" styleClass="icon-emoji"/>
                                        <VBox spacing="2">
                                            <Label text="Sá»‘ Ä‘iá»‡n thoáº¡i" styleClass="info-label"/>
                                            <Label fx:id="customerPhoneLabel" text="0901 234 567" styleClass="info-value"/>
                                        </VBox>
                                    </HBox>

                                    <HBox spacing="12" alignment="CENTER_LEFT">
                                        <Label text="ðŸ“§" styleClass="icon-emoji"/>
                                        <VBox spacing="2">
                                            <Label text="Email" styleClass="info-label"/>
                                            <Label fx:id="customerEmailLabel" text="nguyenvanan@gmail.com" 
                                                   styleClass="info-value" wrapText="true"/>
                                        </VBox>
                                    </HBox>
                                </VBox>
                            </VBox>

                        </VBox>

                        <!-- RIGHT SIDE: TICKET DETAILS -->
                        <VBox spacing="18" styleClass="right-section" VBox.vgrow="ALWAYS">

                            <!-- MOVIE INFO CARD -->
                            <HBox spacing="20" styleClass="movie-card" alignment="TOP_LEFT">
                                <ImageView fx:id="moviePosterImage" fitWidth="120" fitHeight="170" 
                                           preserveRatio="true" styleClass="movie-poster"/>

                                <VBox spacing="18" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS">
                                    <Label fx:id="movieTitleLabel" text="VÃµ SÄ© GiÃ¡c Äáº¥u II" 
                                           styleClass="movie-title" wrapText="true"/>

                                    <VBox spacing="12" styleClass="movie-details">
                                        <HBox spacing="10">
                                            <Label text="ðŸŽ¬" styleClass="detail-icon"/>
                                            <VBox spacing="3">
                                                <Label text="Äá»‹nh dáº¡ng" styleClass="detail-label"/>
                                                <Label fx:id="formatLabel" text="2D Phá»¥ Ä‘á»" styleClass="detail-value"/>
                                            </VBox>
                                        </HBox>

                                        <HBox spacing="10">
                                            <Label text="ðŸ¢" styleClass="detail-icon"/>
                                            <VBox spacing="3">
                                                <Label text="Ráº¡p" styleClass="detail-label"/>
                                                <Label fx:id="cinemaLabel" text="CGV Vincom ÄÃ  Náºµng" 
                                                       styleClass="detail-value" wrapText="true"/>
                                            </VBox>
                                        </HBox>

                                        <HBox spacing="10">
                                            <Label text="ðŸ“" styleClass="detail-icon"/>
                                            <VBox spacing="3">
                                                <Label text="PhÃ²ng chiáº¿u" styleClass="detail-label"/>
                                                <Label fx:id="screenLabel" text="Cinema 4" styleClass="detail-value"/>
                                            </VBox>
                                        </HBox>
                                    </VBox>
                                </VBox>
                            </HBox>

                            <!-- SHOWTIME CARD -->
                            <VBox spacing="15" styleClass="showtime-card">
                                <Label text="Lá»ŠCH CHIáº¾U" styleClass="card-title"/>

                                <HBox spacing="15" alignment="CENTER">
                                    <VBox alignment="CENTER" spacing="5" styleClass="time-box">
                                        <Label text="ðŸ“…" styleClass="time-icon"/>
                                        <Label fx:id="showtimeLabel" text="Thá»© 3, 09/12/2025" styleClass="time-date"/>
                                        <Label text="20:20 ~ 22:16" styleClass="time-hours"/>
                                    </VBox>

                                    <Separator orientation="VERTICAL" styleClass="time-separator"/>

                                    <VBox alignment="CENTER" spacing="5" styleClass="seat-box">
                                        <Label text="ðŸ’º" styleClass="seat-icon"/>
                                        <Label text="Gháº¿ ngá»“i" styleClass="seat-label"/>
                                        <Label fx:id="seatsLabel" text="H13" styleClass="seat-value"/>
                                    </VBox>
                                </HBox>
                            </VBox>

                            <!-- COMBO CARD -->
                            <VBox spacing="15" styleClass="combo-card">
                                <Label text="Äá»’ Ä‚N &amp; NÆ¯á»šC Uá»NG" styleClass="card-title"/>
                                <Label fx:id="combosLabel" text="Combo Couple Ã—1, Combo Solo Ã—2" 
                                       styleClass="combo-value" wrapText="true"/>
                            </VBox>

                            <!-- PAYMENT CARD -->
                            <HBox alignment="CENTER" spacing="15" styleClass="payment-card">
                                <VBox alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                                    <Label text="Tá»•ng thanh toÃ¡n" styleClass="payment-label"/>
                                </VBox>
                                <Label fx:id="totalPriceLabel" text="405.000 Ä‘" styleClass="payment-value"/>
                            </HBox>

                        </VBox>

                    </HBox>

                    <!-- ACTION BUTTONS -->
                    <HBox spacing="20" alignment="CENTER" styleClass="action-buttons">
                        <Button fx:id="downloadTicketButton" styleClass="btn-primary" 
                                onAction="#handleDownloadTicket">
                            <graphic>
                                <HBox spacing="8" alignment="CENTER">
                                    <Label text="ðŸ“¥" styleClass="btn-icon"/>
                                    <Label text="Táº£i vÃ©" styleClass="btn-text"/>
                                </HBox>
                            </graphic>
                        </Button>

                        <Button fx:id="addToCalendarButton" styleClass="btn-secondary" 
                                onAction="#handleAddToCalendar">
                            <graphic>
                                <HBox spacing="8" alignment="CENTER">
                                    <Label text="ðŸ“…" styleClass="btn-icon"/>
                                    <Label text="ThÃªm lá»‹ch" styleClass="btn-text"/>
                                </HBox>
                            </graphic>
                        </Button>

                        <Button fx:id="backToHomeButton" styleClass="btn-outline" 
                                onAction="#handleBackToHome">
                            <graphic>
                                <HBox spacing="8" alignment="CENTER">
                                    <Label text="ðŸ " styleClass="btn-icon"/>
                                    <Label text="Vá» trang chá»§" styleClass="btn-text"/>
                                </HBox>
                            </graphic>
                        </Button>
                    </HBox>

                    <!-- FOOTER NOTE -->
                    <VBox spacing="15" alignment="CENTER" styleClass="footer-note">
                        <Separator styleClass="footer-divider"/>
                        <Label text="âš  Vui lÃ²ng cÃ³ máº·t trÆ°á»›c giá» chiáº¿u 15 phÃºt. VÃ© Ä‘Ã£ mua khÃ´ng hoÃ n, há»§y hoáº·c Ä‘á»•i." 
                               styleClass="footer-warning" wrapText="true"/>
                        <HBox spacing="8" alignment="CENTER">
                            <Label text="Hotline há»— trá»£:" styleClass="footer-text"/>
                            <Label text="1900 6017" styleClass="footer-hotline"/>
                        </HBox>
                    </VBox>

                </VBox>
            </StackPane>
        </ScrollPane>
    </center>

</BorderPane>